pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--press ⬅️ to view fish
 
p=pal
function rp()
 poke( 0x5f2e, 1 ) --endable hidden colors
 custom_palette = {[0]=0,1,140,12,131,3,139,130,136,14,142,143,15,13,6,7}
	pal( custom_palette, 1 )
end


-->8
--cat sprite drawing
function _init()
	ct=3 --cattail
	frame = 0
	poke( 0x5f2e, 1 ) --endable hidden colors
 custom_palette = {[0]=0,1,140,12,131,3,139,130,136,14,142,143,15,13,6,7}
	pal( custom_palette, 1 )
end

function _update()

	frame+=1
	if(frame%4==0) then
	cat_tail()
	end
	
end

function _draw()
	cls(2)
	
	--bgmap
	map(0,16)
	
	--sspr(32,32,32,32,0,0,128,128)
	map(0,0,0,0,128,128)
	cat_idle(25,85)
	
--	just prints some flowers and gates
	spr(80,50,97)
	spr(81,40,97)
	spr(82,0,97)
	spr(82,8,97)
	print("press ⬅️ to view fish",8)
	
	if(btn(0)) then
	--cls(12)
 draw_fish_got(fish)
 end
 
end

function cat_tail()
	if(ct < 5) then
		ct+=1
	else
		ct=3
	end
	return ct
end

function cat_idle(x,y)
		spr(1,x,y,2,3)
		spr(ct,x-7,y+8,1,2)
end
-->8
--fish display

--testfish
fish={
 name="mfing trout"
 ,sprt=6
 ,w=2,h=1
 ,shinycols={
   {4,2}
  ,{9,14}
  ,{10,8}
 }
}


function draw_fish_got(fish)
 --get fish h and w
 local h=fish.h*8
 local w=fish.w*8
 local scale=2
 --upd scale
 --scale=3+sin(t()/4)
 
 --set inverse draw mode + fillp
 poke(0x5f34,0x2)
 --draw border circle
 fillp(▒)
 local circ_rad=65
 circfill(64,64,circ_rad,1 | 0x1800)
 fillp(█)
 
 --draw fish/lines
 local y=40
 y+=5*sin(t()/2)
 draw_flourish_lines(63,y+14)
 
-- set_shiny_pal(fish)
	sspr(fish.sprt%16*8,flr(fish.sprt/16)*8
  ,w,h
  ,63-w*scale/2,y-h*scale/2
  ,w*scale,h*scale)
  
 bprint("holy fucking shit",30,90,15,1)
 bprint("a fucking fish",35,97,14,1)
end


--item get lines
function draw_flourish_lines(x,y)
	for i=0,16 do
		local s=sin(time() * 2.1 + i/16)
		local c=cos(time() * 2.1 + i/16)
		local ty=y-14
		local r=20
		line(x+s*r,ty+c*r,x+s*40,ty+c*40,15)
	end
end


--shiny pal
function set_shiny_pal(fish)
 scols=fish.shinycols
 for i=1,#scols do
  pal(scols[i][1],scols[i][2])
 end
end
__gfx__
80000008000700000000700000000000000000000000000000000056560000000000000000060600000c00c0000000000000000000000000ff00000000000000
08000080007b70000007b7000000770000000000000000000004444445600000000000000065600000b0000c00000000000000000000003f1000000000000000
00800800007cb700007bc7000007cc700000770000000000644555555444004600000000044440000bbb000b0445600000000000000033210000000000000000
00088000007ccb7777bcc7000007bc700007cc700000000005799999ccc564600000000041555406b7bbb0ba4155550600000000000322100000000000000000
00088000007bbbbbbbbbb7000007b7700007bc700007700000558888999c485000000000cbbbb450abbbaba0fffeedf000000000003221200000000000000000
00800800077bbbbbbbbbb7700007b7000007b700007cc700654bbbbbccc40495000000000aaa40040aaa0ab00dddd00d000000000f32121100000000000033ff
08000080007bbb7bbb7bb700007bb700007bb700007bc7000000450004500044000000000005000000b000ab000e000000000000f221212110000003000f2220
80000008077bbbbbbbbbb770007b7000007b700007bb700000000460006000000000000000006000000c000a0000f00000000000333322222200002000322200
000000000007bbbbcbbb7000007b7000007b700007b700000000000000cccc0000000000fff000000cccbc00fff0000000000003222223333311112033222100
0000000000007aaaaaa70000007bb770007bb77007bb777000000000cbbbb9c000000000e7ef0000c7bbabc0d1ef000000003332232233333333333322211000
000000000007bbbbbbb700000007bbb00007bbb0007bbbb00023330cb99998bc00000000e13ef0000aaa0abcdeeef00033222272232233333333322311100000
00000000007bbbbbbbb700000000777000007770000777700172221b988887bc00000000071390000b0b00bb0deee00000011122322223333222221122210000
0000000007bbbbbbbbb7000000000000000000000000000001111177877779c0000000000e71390000c0c0cb0eddef0000000011111122222211112011221000
0000000007bbbbbbbbb700000000000000000000000000000000bb8099999bc0000000000e001399000000ca0e00deff00000000022211111120002000112000
000000007bbbbbbbbbb700000000000000000000000000000000c9b00bbbbc000000000000f007880c000cba00f00dee00000000003220000020000300001230
000000007bbbbbbbbb70000000000000000000000000000000000bcc00ccc000000000000000078000bbbaa000000de00000000000033f000003000000000000
000000007b77bbbbbb70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000007bbb7bbbbb77000000000000000000000000000000000000000077000000000000000000000000000000000000000000000000000000000000000000
000000007abb777ab7bc7000000000000000000000000000000770000007cc700000770000000000000000000000000000000000000000000000000000000000
000000007aabbc7aabbb7000000000000000000000000000007cc7000007bc700007cc7000000000000000000000000000000000000000000000000000000000
000000000777777777770000000000000000000000000000007cb7000007b7700007bc7000077000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000007bb7000007b7000007b700007cc700000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000007b700007bb700007bb700007bc700000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000007b700007b7000007b700007bb7000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000007bb70007b7000007b700007b70000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000007b70007bb770007bb77007bb7770000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000007bb00007bbb00007bbb0007bbbb0000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000770000077700000777000077770000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666666666666666677777777aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa000000000000000000000000ff0000ff00000000eeffffffeffeefffffffffff
66666666666666666666666677777777aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa000000000000000000000000f000000f00000000efffeeffeefeeeefffeefeff
55555555555555555555555577777777aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa0000000000000000000000000000000000000000fffeeeefeeffeeeffeeeffff
54545454545454545454545477777777aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa0000000000000000000000000000000000000000feffffffeeeffeeefeefffff
44444444444444444444444477777777aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa0000000000000000000000000000000000000000eeffeffefeefeeeeffffffff
77777777747777777777477777777777aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa0000000000000000000000000000000000000000eeefffeeffffeeffffffefff
77777777774777777775777777777777aaaaaaaabbbbbbbbbbbbbbbbbbaaaaaa000000000000000000000000f000000f00000000ffeeeffefffeeeeffffefffe
77777777757777777777577777777777bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb000000000000000000000000ff0000ff00000000fefffffffeeeefefffffffee
00000000000000000000000000000000bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb000000000000000000000000000000000000000000000ffffeefe00000000000
0090900000c0c00007a0007a00000000bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb000000000000000000000000000000000000000000fefeefeefffee000000000
0089900000acc000b7abbb7a00000000bbbbbbbbbbccccccccccccccbbbbbbbb00000000000000000000000000000000000000000ffffeeefffffff000000000
0088900000aac00077a7777a00000000bbbcccccccccccccccccccccccccbbbb0000000000000000000000000000000000000000eefeeeeefffeeeef00000000
050500000505000007a0007a00000000cccccccccccccccccccccccccccccccc0000000000000000000000000000000000000000effefeeffefffeef00000000
0045400000454000b7abbb7a00000000cccccccccccccccffffccccccccccccc0000000000000000000000000000000000000000fffffffeeeefffff00000000
000400000004000077a7777a00000000cccccccccccccffffffffccccccccccc0000000000000000000000000000000000000000feeefffffeefffff00000000
00040000000400000770007700000000ffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000eeeffffffffffeef00000000
000000000000000000000000000000007777aaabbbcccccccccccccccbaa77770000000000000000000000000000000000000000ffeefeffffefffef00000000
00000000000000000000000000000000777777aabbbccccccccccccbbaa777770000000000000000000000000000000000000000feeeeffffeeeffee00000000
0000000000000000000000000000000077777777aabbbccccccccbbbaa7777770000000000000000000000000000000000000000feeeeffffeeffffe00000000
00000000000000000000000000000000777777777aaabbccccccbbbaa777777700000000000000000000000000000000000000000ffeffffffffefff00000000
0000000000000000000000000000000011177777777aabbbbbbbba777777771100000000000000000000000000000000000000000efeefefffffeffe00000000
00000000000000000000000000000000111117777777aaaaaaaaaa777777711100000000000000000000000000000000000000000fffffeeeffeefe000000000
0000000000000000000000000000000011111117777777777777777777711111000000000000000000000000000000000000000000feffeeeffeefe000000000
00000000000000000000000000000000111111111177777777777777111111110000000000000000000000000000000000000000000eeffefffff00000000000
00000000000000000000000000000000111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4041404240424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4343434343434300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4343434343434300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4d5e000000006d4e4e4f4e4e4e4f4e4e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4d4d5e000000006d4f4e4e4f4e4f4e4e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4e4f4e5f000000006d4e4d4d6e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4e4d4e5e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4f4e4f4e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4e4f4e6e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4e4e6e00000000005d5e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6e0000000000005d4e4e000000005f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000005d5e5d4e4e6e5f00005d5e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000005d4f4e4e4e4e4f5e00004e4e5e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00005d4e4e6e006d4e4e6e005d4e4e4e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
005d4e4e4e0000006d4e5e004e4e4e4e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5d4e4f4e4e5e5f00004e4d5e4e4f4e4e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4e4e4e4f4e4e5e00004e4e4e4e4e4f4e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4e4f4e4e4e4f4e5e5d4f4e4f4e4e4e4e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4e4e4e4f4e4e4e4f4e4e4e4e4f4e4f4e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
